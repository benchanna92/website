<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zuu Caster Encrypted Code - Matrix Access</title>
<style>
  /* Matrix theme - dark background with green text */
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined');

  :root {
    --matrix-green: #00ff41;
    --background-black: #000000;
    --card-bg: rgba(0, 32, 0, 0.8);
    --code-input-bg: #001a00;
    --font-family-mono: 'Share Tech Mono', monospace, monospace;
  }

  /* Reset and base */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body, html {
    height: 100%;
    background-color: var(--background-black);
    color: var(--matrix-green);
    font-family: var(--font-family-mono);
    display: flex;
    flex-direction: column;
    justify-content: start;
    align-items: center;
    min-height: 100vh;
    padding: 24px 16px;
  }

  /* Matrix falling code background */
  #matrix-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background: var(--background-black);
  }

  header {
    padding-bottom: 24px;
    text-align: center;
  }

  header h1 {
    font-size: 3rem;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    text-shadow: 0 0 10px var(--matrix-green);
    user-select: none;
  }

  header p {
    margin-top: 8px;
    font-size: 1.1rem;
    color: #0f8a15;
    user-select: none;
  }

  main {
    background: var(--card-bg);
    border-radius: 16px;
    padding: 32px;
    max-width: 600px;
    width: 100%;
    box-shadow: 0 0 20px 3px rgba(0,255,65,0.4);
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  label {
    font-size: 1.2rem;
    margin-bottom: 8px;
    display: block;
  }

  input[type="text"], textarea {
    font-family: var(--font-family-mono);
    font-size: 1.1rem;
    color: var(--matrix-green);
    background-color: var(--code-input-bg);
    border: 2px solid var(--matrix-green);
    border-radius: 8px;
    padding: 12px 16px;
    width: 100%;
    resize: none;
    transition: border-color 0.3s ease;
  }

  input[type="text"]:focus, textarea:focus {
    outline: none;
    border-color: #00ff76;
    box-shadow: 0 0 8px #00ff76;
  }

  button {
    font-family: var(--font-family-mono);
    font-size: 1.2rem;
    background-color: transparent;
    border: 2px solid var(--matrix-green);
    color: var(--matrix-green);
    padding: 12px 24px;
    border-radius: 12px;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
    user-select: none;
  }

  button:hover,
  button:focus {
    background-color: var(--matrix-green);
    color: var(--background-black);
    outline: none;
  }

  section#result {
    max-height: 400px;
    overflow-y: auto;
    background-color: #001800cc;
    border-radius: 12px;
    padding: 16px;
    border: 1px solid var(--matrix-green);
  }

  section#result h2 {
    font-size: 1.6rem;
    margin-bottom: 16px;
    text-shadow: 0 0 6px var(--matrix-green);
  }

  ul.pricelist {
    list-style-type: none;
    font-size: 1.1rem;
  }

  ul.pricelist li {
    margin-bottom: 10px;
    padding-left: 20px;
    position: relative;
  }
  ul.pricelist li::before {
    content: "â–¸";
    position: absolute;
    left: 0;
    color: var(--matrix-green);
  }

  /* IC input section */
  #ic-input-section {
    margin-top: 24px;
    padding: 20px;
    background: rgba(0, 90, 0, 0.9);
    border-radius: 12px;
    border: 2px solid #00ff41;
    display: none;
    flex-direction: column;
    gap: 16px;
  }

  #ic-input-section label {
    font-size: 1.2rem;
  }

  #ic-input-section input[type="text"] {
    width: 100%;
  }

  /* Responsive typography and layout */
  @media (max-width: 640px) {
    main {
      padding: 24px 16px;
    }
    header h1 {
      font-size: 2.2rem;
    }
    button {
      width: 100%;
    }
  }

  /* Material Icon style */
  .material-symbols-outlined {
    font-variation-settings:
      'FILL' 0,
      'wght' 700,
      'GRAD' 0,
      'opsz' 48;
    vertical-align: middle;
    margin-right: 8px;
    color: var(--matrix-green);
  }
</style>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>
<body>
<canvas id="matrix-canvas" aria-hidden="true"></canvas>

<header role="banner">
  <h1>Zuu Caster Encrypted Code</h1>
  <p>Enter one or multiple access codes to view the pricelist</p>
</header>

<main role="main" aria-labelledby="mainHeading">
  <form id="access-code-form" aria-describedby="formInstructions">
    <label for="accessCodes">Access Code(s):</label>
    <input
      type="text"
      id="accessCodes"
      name="accessCodes"
      autocomplete="off"
      placeholder="E.g. 01, 007, 111, 04, 02"
      aria-required="true"
      aria-describedby="formInstructions"
      required
    />
    <small id="formInstructions" style="color: #0f8a15; display: block; margin-bottom: 12px;">
      You can enter multiple codes separated by comma or space
    </small>
    <button type="submit" aria-label="Submit access codes and show pricelist">
      <span class="material-symbols-outlined" aria-hidden="true">key</span>Submit
    </button>
  </form>

  <section id="result" aria-live="polite" aria-atomic="true" tabindex="0" style="display:none;">
    <h2>Pricelist for Entered Access Codes:</h2>
    <ul class="pricelist" id="pricelist"></ul>
  </section>

  <section id="ic-input-section" aria-live="polite" aria-atomic="true" tabindex="-1">
    <form id="ic-form" aria-label="IC Number form for access code 02">
      <label for="icNumber">IC number:</label>
      <input type="text" id="icNumber" name="icNumber" autocomplete="off" placeholder="Enter your IC number" required />
      <button type="submit" aria-label="Create case and open WhatsApp">
        <span class="material-symbols-outlined" aria-hidden="true">send</span>Create Case &amp; WhatsApp
      </button>
    </form>
  </section>
</main>

<script>
  (() => {
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');

    let width, height;
    let columns;
    const fontSize = 16;
    let drops;

    const characters = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%^&*()*&^%'.split('');

    function setup() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
      columns = Math.floor(width / fontSize);
      drops = new Array(columns).fill(1);
    }

    function draw() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
      ctx.fillRect(0, 0, width, height);
      ctx.fillStyle = '#0F0'; // green text
      ctx.font = fontSize + 'px Share Tech Mono';

      for(let i=0; i < columns; i++) {
        let text = characters[Math.floor(Math.random() * characters.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

        if(drops[i] * fontSize > height && Math.random() > 0.975) {
          drops[i] = 0;
        }
        drops[i]++;
      }
    }

    function loop() {
      draw();
      requestAnimationFrame(loop);
    }

    window.addEventListener('resize', () => {
      setup();
    });

    setup();
    loop();

    // Pricelist mapping for access codes
    const accessCodePricelist = {
      '01': {
        description: 'Unlock FRP/Google',
        price: 'RM 30',
      },
      '007': {
        description: 'Check Telco iPhone',
        price: 'RM 20',
      },
      '111': {
        description: 'Unlock Telco',
        price: 'RM 50',
      },
      '02': {
        description: 'Tutup Blacklist Telco Kekal',
        price: 'RM 150',
      },
      '04': {
        description: 'Telco/Contract Device Access',
        price: 'RM 80',
      },
    };

    // Normalize access code keys to uppercase and no dots, trim spaces
    function normalizeCode(code) {
      return code.toString().trim().replace(/\./g, '').toUpperCase();
    }

    const form = document.getElementById('access-code-form');
    const resultSection = document.getElementById('result');
    const pricelistUl = document.getElementById('pricelist');
    const accessCodesInput = document.getElementById('accessCodes');
    const icSection = document.getElementById('ic-input-section');
    const icForm = document.getElementById('ic-form');
    const icInput = document.getElementById('icNumber');

    form.addEventListener('submit', e => {
      e.preventDefault();

      let input = accessCodesInput.value;
      if (!input) {
        alert('Please enter at least one access code.');
        return;
      }

      // Split input by comma, space, or newlines, filter empty
      let codes = input.split(/[\s,]+/).map(normalizeCode).filter(c => c.length > 0);

      let matchedItems = [];

      codes.forEach(code => {
        if (accessCodePricelist.hasOwnProperty(code)) {
          matchedItems.push({ code, ...accessCodePricelist[code] });
        }
      });

      pricelistUl.innerHTML = '';

      if(matchedItems.length === 0) {
        pricelistUl.innerHTML = '<li>No matching access codes found.</li>';
      } else {
        matchedItems.forEach(item => {
          let li = document.createElement('li');
          li.textContent = `[${item.code}] ${item.description} - Price: ${item.price}`;
          pricelistUl.appendChild(li);
        });
      }

      // Show result section and focus for accessibility
      resultSection.style.display = 'block';
      resultSection.focus();

      // Show or hide IC number input section if code '02' is present
      if(codes.includes('02')) {
        icSection.style.display = 'flex';
        icInput.focus();
      } else {
        icSection.style.display = 'none';
        icInput.value = '';
      }
    });

    // Handle IC form submission to generate case number and open WhatsApp
    icForm.addEventListener('submit', e => {
      e.preventDefault();

      const icNumber = icInput.value.trim();
      if(!icNumber) {
        alert('Please enter your IC number.');
        icInput.focus();
        return;
      }

      // Generate a case number: simple format "CASE" + current YYYYMMDDHHMMSS + random 3digits
      const now = new Date();
      const pad2 = n => n.toString().padStart(2,'0');
      const pad3 = n => n.toString().padStart(3,'0');
      const caseNumber = 'CASE' +
        now.getFullYear().toString() +
        pad2(now.getMonth()+1) +
        pad2(now.getDate()) +
        pad2(now.getHours()) +
        pad2(now.getMinutes()) +
        pad2(now.getSeconds()) +
        pad3(Math.floor(Math.random() * 1000));

      // WhatsApp URL with phone number +60178040403
      const phone = '+60178040403';

      // Message content template
      const message = encodeURIComponent(
        `Hello, I would like to create a case for access code 02 (Tutup Blacklist Telco Kekal).\nIC Number: ${icNumber}\nCase Number: ${caseNumber}\nPlease assist.`
      );

      const whatsappUrl = `https://wa.me/${phone.replace(/\D/g, '')}?text=${message}`;

      // Open WhatsApp in new tab/window
      window.open(whatsappUrl, '_blank', 'noopener');

      // Optionally show alert or confirmation
      alert(\`Case created with number: \${caseNumber}. Opening WhatsApp chat...\`);

      // Reset IC number input and hide section
      icInput.value = '';
      icSection.style.display = 'none';
    });
  })();
</script>
</body>
</html>

